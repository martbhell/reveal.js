<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Yubikeys & You</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>
					<section>
						This slideset is made using <a href="https://github.com/hakimel/reveal.js/" target="_blank">reveal.js</a>.
<br />

You can change slides with the *arrow keys*.
<br />

You can get an overview of all the slides by pressing *esc*.
<br />

Press **↓** to see an index of topics.
<br />
Press **→** one or more times to select topic.

					</section>
					<section data-background="topic_background.png" data-background-size="contain">
						<br />Placement <br /> <font size="+2">2019 <br /> Johan Guldmyr & CSC Pouta Cloud Team</font>
					</section>
					<section>
						Credits to CSC Pouta Team & Boris in openstack-operator channel<br />
						and various placement videos :)

					</section>
					<section>
						Documentation: https://docs.openstack.org/placement/latest/ <br />
						List of changes: https://docs.openstack.org/nova/rocky/user/placement.html <br />
						For newton: ??? <br />
						For ocata: ? <br />

					</section>
					<section>
						https://www.openstack.org/videos/summits/vancouver-2018/placement-present-and-future-in-nova-and-beyond<br />
						<a href="https://www.youtube.com/watch?v=LVkknWuGq_I&feature=youtu.be&list=PL0vkr2Qkh9oM6-avm8kqlk0eEhk2x7zhI&t=1595">Video about what is happening in Newton and Ocata</a><br />

					</section>
					<section>
						In Newton: nova-compute talk to placement and update their resource providers there. <br />
						In Ocata: nova-scheduler will use old method until all nova-computes are ocata. Not anymore in Pike<br/>
						In Ocata: nova-compute will not start without [placement]<br />
					</section>
					<section>
						same as last slide but with a picture? TODO
					</section>
					<section>
						openstack-nova-placement-api.rpm </br>
						WSGI setup<br />
						openstack admin user <br/>
						service catalog and endpoints <br />
						nova.conf [placement] <br />
					</section>
					<section>
						placement requires admin credentials <br />
						pip install osc-placement <br />
						openstack resource provider list <br />
					</section>
					<section>
						<a href="https://docs.openstack.org/releasenotes/nova/ocata.html">Ocata and Nova</a> <br />
						You can safely remove the AggregateCoreFilter, AggregateRamFilter, and AggregateDiskFilter from your [filter_scheduler]enabled_filters and you do not need to replace them with any other core/ram/disk filters. The placement query in the FilterScheduler takes care of the core/ram/disk filtering, so CoreFilter, RamFilter, and DiskFilter are redundant. <br />	
					</section>
					<section>
						Pike<br /> 
						- Nova FilterScheduler now requests allocation candidates during scheduling.<br />
						- <a href="https://docs.openstack.org/releasenotes/nova/pike.html">Some bugs fixed around live migration and evacuate to specific hosts</a><br />
					</section>
					<section>
						pike <br />
						- an allocation request is still made and if it fails migration/evacuate fails. <br />
						- benefits when using multiple schedulers <br />
						- traits are added<br />
					</section>
					<section>

						Queens  <br>
						  - placement must be upgraded before nova-scheduler<br/>
						  - <a title="found that it came from rocky by grepping openstack/nova git repo" href="https://docs.openstack.org/placement/latest/configuration/config.html">placement.conf setting introduced in queens</a><br />
						 If False, allocation candidates are returned in a deterministic but undefined order. That is, all things being equal, two requests for allocation candidates will return the same results in the same order; but no guarantees are made as to how that order is determined.<br />
						 - Added a required (traits) to the GET allocation_candidates <br />
					 </section>
					 <section>
						 Queens <br>
						 - Traits extra specs are added to flavours like: <br />
						 trait:HW_CPU_X86_AVX2=required<br />
						 trait:STORAGE_DISK_SSD=required<br />
						 - [schedulers]/max_placement_results defaults to 1000 <br /> 
					 </section>
					 <section>
						 rocky <br>

						 - CachingScheduler issues - it gets deprecated </br>
						 - placement support for rbac
						 - has "member_of" - only return resource providers that are part of an aggregate
						 - nova-api now deletes resource providers when updating instances, nova-computes and mirror nova aggregates <br />
						 - can now configure a [placement_database] <br />
						 - changing this and running "nova-manage api_db sync" will create tables but won't sync any data <br />
						 - up to each deployment to do this? <br />
					 </section>
					 <section>
						 rocky <br>
						 - nova now supports reporting cpu traits of libvirt guests to placement <br />
						 - nova scheduler can now use placement for better query with tenant-restricted aggregatse. Requires a new setting <br />
					 </section>
					 <section>
						Stein/Train - extracted <br />
					</section>
					<section>
						Things: <br />
						resource providers <br />
						inventory <br/>
						allocations <br />
						Custom resource classes are specific to a deployment and represent types of quantitative resources that are not interoperable between OpenStack clouds.
					</section>
					<section>
						If a compute gets a new UUID == admin work to remove resource? <br />
					</section>
				</section>
				
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info about config & dependencies:
			// - https://github.com/hakimel/reveal.js#configuration
			// - https://github.com/hakimel/reveal.js#dependencies
			Reveal.initialize({
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
	</body>
</html>
